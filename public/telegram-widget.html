<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-widget.js?21"></script>
</head>
<body style="margin:0;padding:0;">
    <div id="telegram-login"></div>
    <script>
        // Получаем имя бота из URL параметров
        const urlParams = new URLSearchParams(window.location.search);
        const botUsername = urlParams.get('bot');
        const forceAuth = urlParams.get('force') === 'true';
        
        if (!botUsername) {
            document.body.innerHTML = '<div style="color: red; padding: 10px;">Ошибка: имя бота не указано</div>';
        } else {
            window.onload = function() {
                const script = document.createElement('script');
                script.src = 'https://telegram.org/js/telegram-widget.js?21';
                script.setAttribute('data-telegram-login', botUsername);
                script.setAttribute('data-size', 'large');
                script.setAttribute('data-auth-url', window.location.href);
                script.setAttribute('data-request-access', 'write');
                script.setAttribute('data-onauth', 'window.parent.onTelegramAuth(user)');
                script.setAttribute('data-radius', '8');
                script.setAttribute('data-userpic', 'true');
                script.setAttribute('data-request-access', 'write');
                script.setAttribute('data-onauth', 'window.parent.onTelegramAuth(user)');
                if (forceAuth) {
                    script.setAttribute('data-auth-url', window.location.href + '&force=true');
                }
                document.body.appendChild(script);
            };
        }
    </script>
</body>
</html> 