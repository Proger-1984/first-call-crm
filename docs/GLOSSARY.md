# Глоссарий First Call API

Термины и понятия, используемые в проекте.

## Бизнес-термины

### First Call
Название сервиса. Позволяет риелторам первыми узнавать о новых объявлениях недвижимости и автоматически звонить владельцам.

### Подписка (Subscription)
Платный/бесплатный доступ пользователя к отслеживанию объявлений в определённой категории и локации на заданный период.

### Тариф (Tariff)
План подписки с определённой длительностью и стоимостью:
- **Demo** — бесплатный тестовый период 3 часа
- **Premium** — платные тарифы (1 месяц, 3 месяца, 6 месяцев)

### Категория (Category)
Тип недвижимости:
- Квартиры
- Дома
- Коммерческая недвижимость
- Земельные участки

### Локация (Location)
Географический регион для отслеживания объявлений (город, область).

### Полигон (Polygon)
Пользовательская область на карте для точного определения зоны поиска объявлений. Один пользователь может создать несколько полигонов в рамках одной подписки.

### Источник (Source)
Платформа-агрегатор объявлений:
- Avito
- ЦИАН
- Яндекс.Недвижимость
- Domofond
- И другие

### Автозвонок (Auto Call)
Автоматический звонок пользователю при появлении нового подходящего объявления.

### Поднятое объявление (Raised Listing)
Объявление, которое было "поднято" владельцем на платформе (показывается выше в поиске).

## Технические термины

### Access Token
JWT токен с коротким сроком жизни (1 час) для авторизации API запросов. Содержит `user_id`, `role`, `device_type`.

### Refresh Token
JWT токен с длительным сроком жизни (7 дней) для обновления access token. Хранится в базе данных.

### JWT (JSON Web Token)
Стандарт для безопасной передачи информации между сторонами в виде JSON-объекта. Используется для аутентификации.

### Eloquent ORM
Object-Relational Mapping библиотека Laravel для работы с базой данных через объекты (модели).

### Slim Framework
Легковесный PHP framework для создания REST API приложений.

### PHP-DI
Dependency Injection контейнер для управления зависимостями в приложении.

### PSR-7
PHP Standard Recommendation для HTTP сообщений (Request/Response).

### PSR-15
PHP Standard Recommendation для HTTP Server Request Handlers (Middleware).

### Middleware
Промежуточный слой обработки запроса перед достижением контроллера или после формирования ответа.

### Controller
Класс, обрабатывающий HTTP запросы, выполняющий валидацию и делегирующий бизнес-логику в сервисы.

### Service
Класс, содержащий бизнес-логику приложения. Изолирует логику от контроллеров.

### Model
Eloquent модель, представляющая таблицу базы данных и содержащая методы для работы с данными.

### Migration
Файл с описанием изменений структуры базы данных (создание/изменение таблиц).

### Seed
Файл для заполнения базы данных тестовыми данными.

### Repository Pattern
Паттерн проектирования для абстрагирования логики доступа к данным (в проекте реализован через Eloquent).

### Dependency Injection
Паттерн проектирования для передачи зависимостей в класс извне (через конструктор).

### ResponseTrait
Трейт с методами для формирования унифицированных JSON ответов API.

## Статусы и состояния

### Статусы подписки
- **pending** — ожидает подтверждения и оплаты администратором
- **active** — активна, пользователь имеет доступ к функционалу
- **expired** — срок действия истёк
- **cancelled** — отменена администратором или системой

### Роли пользователей
- **user** — обычный пользователь (риелтор)
- **admin** — администратор с расширенными правами

### Device Type
Тип устройства для JWT токенов:
- **web** — веб-приложение (токены в cookies)
- **mobile** — мобильное приложение (токены в теле ответа)

## Сущности базы данных

### User
Пользователь системы (риелтор). Связан с подписками, настройками, источниками.

### UserSettings
Настройки пользователя: автозвонок, звонок на поднятые объявления.

### UserSubscription
Подписка пользователя на категорию и локацию с определённым тарифом.

### SubscriptionHistory
История операций с подписками (создание, активация, продление, отмена).

### RefreshToken
JWT refresh токен с привязкой к пользователю и типу устройства.

### UserLocationPolygon
Пользовательский полигон (область на карте) для точного поиска объявлений.

### TariffPrice
Цена тарифа для конкретной локации (разные цены в разных регионах).

### Listing
Объявление о недвижимости из внешних источников.

### ListingStatus
Статус объявления (новое, обработано, архив).

## API термины

### Endpoint
URL адрес API для выполнения определённого действия.

### Request Body
Тело HTTP запроса, содержащее данные в формате JSON.

### Response
Ответ сервера на HTTP запрос с данными и кодом статуса.

### Query Parameters
Параметры в URL после знака `?` (например: `/users?page=1&limit=10`)

### Path Parameters
Динамические параметры в пути URL (например: `/users/{id}`)

### HTTP Methods
- **GET** — получение данных
- **POST** — создание ресурса
- **PUT** — полное обновление ресурса
- **PATCH** — частичное обновление ресурса
- **DELETE** — удаление ресурса

### HTTP Status Codes
- **2xx** — успешные запросы
- **4xx** — ошибки клиента (неверный запрос, не авторизован)
- **5xx** — ошибки сервера

### CORS (Cross-Origin Resource Sharing)
Механизм, позволяющий запросы с других доменов (для фронтенда).

## Интеграции

### Telegram Bot API
API Telegram для отправки уведомлений пользователям через бота.

### Telegram Widget
Виджет авторизации через Telegram на веб-странице.

### PostGIS
Расширение PostgreSQL для работы с геопространственными данными (координаты, полигоны).

## Docker термины

### Container
Изолированное окружение для запуска приложения.

### Image
Шаблон для создания контейнеров.

### Volume
Персистентное хранилище данных для контейнеров.

### Network
Виртуальная сеть для связи между контейнерами.

### docker-compose
Инструмент для определения и запуска многоконтейнерных Docker приложений.

## Процессы

### Eager Loading
Загрузка связанных данных вместе с основным запросом (избегание N+1 проблемы).

### N+1 Problem
Проблема производительности, когда выполняется 1 запрос для основных данных и N запросов для связанных данных.

### Validation
Проверка входных данных на соответствие требованиям перед обработкой.

### Authentication
Процесс проверки личности пользователя (кто ты?).

### Authorization
Процесс проверки прав доступа пользователя (что ты можешь делать?).

### Logging
Запись событий и ошибок в файлы для последующего анализа.

## Паттерны кода

### Try-Catch
Блок обработки исключений для предотвращения падения приложения.

### Factory Pattern
Паттерн создания объектов через фабричный метод (используется в DI контейнере).

### Singleton
Паттерн, гарантирующий существование только одного экземпляра класса.

### Builder Pattern
Паттерн для пошагового построения сложных объектов (используется в Eloquent Query Builder).

## Соглашения

### snake_case
Именование с подчёркиванием: `user_subscription`, `created_at`

### camelCase
Именование с заглавной буквой в середине: `userId`, `getUserInfo`

### PascalCase
Именование с заглавной первой буквой: `UserController`, `AuthService`

### kebab-case
Именование через дефис: `/user-settings`, `/api/v1/auth`

## Abbreviations (Аббревиатуры)

- **API** — Application Programming Interface
- **JWT** — JSON Web Token
- **ORM** — Object-Relational Mapping
- **DI** — Dependency Injection
- **PSR** — PHP Standard Recommendation
- **HTTP** — HyperText Transfer Protocol
- **HTTPS** — HTTP Secure
- **REST** — Representational State Transfer
- **CRUD** — Create, Read, Update, Delete
- **SQL** — Structured Query Language
- **JSON** — JavaScript Object Notation
- **URL** — Uniform Resource Locator
- **URI** — Uniform Resource Identifier
- **DTO** — Data Transfer Object
- **CORS** — Cross-Origin Resource Sharing
- **SSL** — Secure Sockets Layer
- **TLS** — Transport Layer Security

## Внешние сервисы

### Avito
Крупнейшая платформа объявлений в России.

### ЦИАН
Специализированный портал недвижимости.

### Яндекс.Недвижимость
Сервис поиска и размещения объявлений о недвижимости от Яндекса.

### Domofond
Портал недвижимости для поиска и размещения объявлений.

## Метрики и мониторинг

### Uptime
Время работы сервиса без сбоев.

### Response Time
Время ответа сервера на запрос.

### Error Rate
Процент запросов, завершившихся ошибкой.

### Throughput
Количество обработанных запросов в единицу времени.
