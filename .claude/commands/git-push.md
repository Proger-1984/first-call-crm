Выполни следующие шаги последовательно:

## 1. Подтяни актуальное состояние

```bash
git fetch origin
git status
```

Покажи пользователю:
- Текущую ветку
- Отставание/опережение от remote

## 2. Сделай merge с remote

```bash
git merge origin/<текущая_ветка>
```

**Если возникли конфликты:**
- Покажи список конфликтующих файлов
- Для каждого файла предложи варианты решения:
  - Принять локальную версию (ours)
  - Принять remote версию (theirs)
  - Объединить вручную (покажи обе версии)
- После разрешения конфликтов закоммить merge

## 3. Покажи изменения

```bash
git status --short
git diff --stat
```

Кратко опиши что изменилось:
- Новые файлы
- Изменённые файлы
- Удалённые файлы

## 4. Проверка совместимости со стеком

Проанализируй изменённые файлы и определи их тип:

### Backend файлы (PHP)
Паттерны: `src/**/*.php`, `bootstrap/**/*.php`, `routes/**/*.php`, `config/**/*.php`, `db/migrations/**/*.php`

Если есть backend файлы, проверь соответствие правилам из `.cursor/rules/firstcall-backend.mdc`:
- [ ] `declare(strict_types=1);` в начале каждого PHP файла
- [ ] Строгая типизация параметров и возвращаемых значений
- [ ] PHPDoc для публичных методов
- [ ] Использование ResponseTrait в контроллерах
- [ ] Бизнес-логика в сервисах, не в контроллерах
- [ ] Сервисы зарегистрированы в `bootstrap/container.php`
- [ ] Обработка исключений в try-catch
- [ ] `Carbon::now()` вместо `now()`

### Frontend файлы (React/TypeScript)
Паттерны: `frontend-react/**/*.tsx`, `frontend-react/**/*.ts`, `frontend-react/**/*.css`

Если есть frontend файлы, проверь соответствие правилам из `.cursor/rules/firstcall-frontend-react.mdc`:
- [ ] Строгая типизация (interface для props)
- [ ] Именованный + default экспорт компонентов
- [ ] Обработка состояний: loading, error, success
- [ ] useCallback для функций в дочерние компоненты
- [ ] CSS переменные вместо хардкода цветов
- [ ] API методы типизированы через generics

### Если найдены отклонения:
- Выведи список несоответствий
- Спроси пользователя: исправить сейчас или продолжить коммит?

## 5. Спроси что коммитить

Спроси пользователя через AskUserQuestion:
- Какие файлы добавить в коммит:
  - Все изменённые файлы
  - Только backend файлы
  - Только frontend файлы
  - Выбрать конкретные файлы

Если пользователь хочет выбрать конкретные — покажи список и дай выбрать.

## 6. Создай коммит

- Проанализируй выбранные изменения
- Предложи описание коммита на русском языке
- Формат: "Тип: краткое описание"
- Типы: feat, fix, refactor, docs, style, test, chore
- Спроси подтверждение или корректировку описания

## 7. Запуш в репозиторий

```bash
git push origin <текущая_ветка>
```

После успешного пуша выведи:
- Ссылку на репозиторий: https://github.com/Proger-1984/first-call-crm
- Количество закоммиченных файлов
- Краткое резюме изменений
